<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DUSK Lending Platform</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>üåô DUSK Lending Platform</h1>
            <p class="subtitle">Deposit DUSK ‚Ä¢ Borrow USDT ‚Ä¢ Earn Interest</p>
        </header>

        <!-- Network Status -->
        <div class="network-status" id="networkStatus">
            <div class="status-item">
                <span class="label">Network:</span>
                <span id="networkName">Not Connected</span>
            </div>
            <div class="status-item">
                <span class="label">Chain ID:</span>
                <span id="chainId">-</span>
            </div>
        </div>

        <!-- Wallet Connection -->
        <div class="wallet-section">
            <button id="connectWallet" class="btn btn-primary">Connect Wallet</button>
            <button onclick="addDuskNetwork()" class="btn btn-secondary" style="margin-left: 10px;">Add DuskEVM Network</button>
            <div id="walletInfo" class="wallet-info hidden">
                <p><strong>Address:</strong> <span id="walletAddress"></span></p>
                <p><strong>DUSK Balance:</strong> <span id="duskBalance">0</span> DUSK</p>
                <p><strong>USDT Balance:</strong> <span id="usdtBalance">0</span> USDT</p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Pool Statistics -->
            <div class="card">
                <h2>üìä Pool Statistics</h2>
                <div class="stats-grid">
                    <div class="stat">
                        <div class="stat-label">DUSK Price</div>
                        <div class="stat-value" id="duskPrice">$0.50</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Total USDT Liquidity</div>
                        <div class="stat-value" id="totalLiquidity">-</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Available to Borrow</div>
                        <div class="stat-value" id="availableBorrow">-</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Borrow APR</div>
                        <div class="stat-value">8%</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Supply APR</div>
                        <div class="stat-value">5%</div>
                    </div>
                </div>
            </div>

            <!-- Your Position -->
            <div class="card">
                <h2>üí∞ Your Position</h2>
                <div class="position-grid">
                    <div class="position-item">
                        <div class="position-label">DUSK Collateral</div>
                        <div class="position-value" id="userCollateral">0 DUSK</div>
                    </div>
                    <div class="position-item">
                        <div class="position-label">USDT Borrowed</div>
                        <div class="position-value" id="userDebt">0 USDT</div>
                    </div>
                    <div class="position-item">
                        <div class="position-label">Health Factor</div>
                        <div class="position-value" id="healthFactor">‚àû</div>
                    </div>
                    <div class="position-item">
                        <div class="position-label">Max Borrow</div>
                        <div class="position-value" id="maxBorrow">0 USDT</div>
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div class="actions-grid">
                <!-- Faucet -->
                <div class="card action-card">
                    <h3>üíß Get Test Tokens</h3>
                    <p class="card-description">Get free DUSK and USDT for testing</p>
                    <button class="btn btn-secondary" onclick="getFaucetTokens()">Get Tokens</button>
                </div>

                <!-- Deposit -->
                <div class="card action-card">
                    <h3>üì• Deposit DUSK</h3>
                    <p class="card-description">Deposit DUSK as collateral</p>
                    <input type="number" id="depositAmount" placeholder="Amount" class="input">
                    <button class="btn btn-primary" onclick="depositDusk()">Deposit</button>
                </div>

                <!-- Borrow -->
                <div class="card action-card">
                    <h3>üí∏ Borrow USDT</h3>
                    <p class="card-description">Borrow USDT against collateral</p>
                    <input type="number" id="borrowAmount" placeholder="Amount" class="input">
                    <button class="btn btn-primary" onclick="borrowUsdt()">Borrow</button>
                </div>

                <!-- Repay -->
                <div class="card action-card">
                    <h3>üí∞ Repay USDT</h3>
                    <p class="card-description">Repay your USDT loan</p>
                    <input type="number" id="repayAmount" placeholder="Amount" class="input">
                    <button class="btn btn-primary" onclick="repayUsdt()">Repay</button>
                </div>

                <!-- Withdraw -->
                <div class="card action-card">
                    <h3>üì§ Withdraw DUSK</h3>
                    <p class="card-description">Withdraw DUSK collateral</p>
                    <input type="number" id="withdrawAmount" placeholder="Amount" class="input">
                    <button class="btn btn-primary" onclick="withdrawDusk()">Withdraw</button>
                </div>

                <!-- Supply USDT -->
                <div class="card action-card">
                    <h3>üè¶ Supply USDT</h3>
                    <p class="card-description">Supply USDT to earn interest</p>
                    <input type="number" id="supplyAmount" placeholder="Amount" class="input">
                    <button class="btn btn-secondary" onclick="supplyUsdt()">Supply</button>
                </div>
            </div>
        </div>

        <!-- Status Messages -->
        <div id="statusMessage" class="status-message hidden"></div>

        <!-- Footer -->
        <footer>
            <p>DUSK Lending Platform ‚Ä¢ Based on AAVE v3 ‚Ä¢ Built for DuskEVM</p>
            <p class="warning">‚ö†Ô∏è Testnet Only - Do Not Use Real Assets</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
